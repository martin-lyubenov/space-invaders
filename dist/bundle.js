(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{e:()=>E});const t={defenderShooting:new Audio("./sounds/shoot.wav"),alienDeathSound:new Audio("./sounds/invaderkilled.wav"),backgroundMusic:new Audio("./sounds/spaceinvaders1.mpeg"),mothershipSoundHighPitch:new Audio("./sounds/ufo_highpitch.wav"),mothershipSoundLowPitch:new Audio("./sounds/ufo_lowpitch.wav")},s=document.querySelector(".game-area");class i{constructor(){this.render(),this.config(t)}render(){this.mothership=document.createElement("div"),this.mothership.classList.add("alien","mothership")}config(e){this.mothership.x=s.offsetWidth,this.mothership.style.left=this.mothership.x+"px",this.mothership.style.top="0px",0===Math.round(Math.random())?this.mothershipCurrentSound=e.mothershipSoundHighPitch:this.mothershipCurrentSound=e.mothershipSoundLowPitch,s.appendChild(this.mothership)}}let n={speed:2,playerMovementMultiplier:2,lazerShotMovementMultiplier:3,alienClusterMultiplier:.4,alienPos:0,alienDirection:1,alienSpriteChangeInterval:500,alienLazerShotSpriteChangeInterval:50,alienFireInterval:2e3,fireInterval:800,extraLivesCounter:1,mothershipSpawnInterval:5e4,mothershipMovementMultiplier:5,maxAlienClusterSize:55,maxPlayerLives:5},l={score:0,lastAlienSpriteInterval:0,lastAlienLazerShotSpriteInterval:0,lastAlienLazerShot:0,lastSpawnMothership:0,isActive:!0};function a(e,t){const s=e.getBoundingClientRect(),i=t.getBoundingClientRect();return!(s.top>i.bottom||s.bottom<i.top||s.right<i.left||s.left>i.right)}let o={x:100,y:document.querySelector(".game-area").offsetHeight-50,width:0,height:0,lastTimeShot:0,lives:3};const r=document.querySelector(".game-area");class c{constructor(){this.render(),this.config(o)}render(){this.lazerShot=document.createElement("div"),this.lazerShot.classList.add("lazer-shot")}config(e){this.lazerShot.y=e.y-e.height-25,this.lazerShot.style.top=this.lazerShot.y+"px",this.lazerShot.style.left=e.x+e.width/2-12+"px",r.appendChild(this.lazerShot)}}document.addEventListener("keydown",(function(e){d[e.code]=!0})),document.addEventListener("keyup",(function(e){d[e.code]=!1}));let d={};const h=document.querySelector(".lives-counter");class u{constructor(){this.render(),this.config()}render(){this.playerLife=document.createElement("div"),this.playerLife.classList.add("one-life")}config(){h.appendChild(this.playerLife)}}const m=document.querySelector(".game-area");class p{constructor(e){this.render(e),this.config(e)}render(e){void 0!==e&&(this.alienLazerShot=document.createElement("div"),this.alienLazerShot.classList.add("alien-lazer-shot"),this.alienLazerShot.y=e.getBoundingClientRect().y,this.alienLazerShot.style.top=this.alienLazerShot.y+"px")}config(e){this.alienLazerShot.style.left=e.getBoundingClientRect().x+e.offsetWidth/2-12+"px",m.appendChild(this.alienLazerShot)}}const g=document.querySelector(".game-area");class f{constructor(){this.render()}render(){this.alien=document.createElement("div"),this.alien.classList.add("alien")}}class y{constructor(){this.render(n),this.config()}render(e){this.alienCluster=document.createElement("div"),this.alienCluster.classList.add("alien-cluster");for(let t=0;t<e.maxAlienClusterSize;t++){const e=(new f).alien;t<11?e.classList.add("alien-40pts"):t<33?e.classList.add("alien-20pts"):e.classList.add("alien-10pts"),this.alienCluster.appendChild(e)}}config(){this.alienCluster.style.top=g.offsetHeight+"px",this.alienCluster.style.top="0px",g.appendChild(this.alienCluster)}}const S=document.querySelector(".game-area");class v{constructor(){this.render(o),this.config()}render(e){this.defender=document.createElement("div"),this.defender.classList.add("defender"),this.defender.style.left=e.x+"px",this.defender.style.top=e.y+"px"}config(){S.appendChild(this.defender)}}const L=document.querySelector(".game-area");class x{constructor(){this.render()}render(){this.singleShield=document.createElement("div"),this.singleShield.classList.add("shield","shield-full-hp")}}class A{constructor(){this.render(),this.config()}render(){this.shieldField=document.createElement("div"),this.shieldField.classList.add("shield-field");for(let e=1;e<=4;e++){const e=(new x).singleShield;this.shieldField.appendChild(e)}}config(){this.shieldField.style.width=L.offsetWidth/1.25+"px",this.shieldField.style.top=L.offsetHeight-200+"px",this.shieldField.style.left=L.offsetWidth/10+"px",L.appendChild(this.shieldField)}}const w=document.querySelector(".start-game");function I(){w.classList.add("hidden");const e=(new v).defender;o.height=e.offsetHeight,o.width=e.offsetWidth,new y,new A,t.backgroundMusic.play();for(let e=1;e<=3;e++)new u;window.requestAnimationFrame(E)}const q=document.querySelector(".start-button");let z=document.querySelector(".game-area");const C=document.querySelector(".game-over"),k=document.querySelector(".points");let b;function E(e){if(function(e){d.ArrowLeft&&o.x>0&&(o.x-=n.speed*n.playerMovementMultiplier),d.ArrowRight&&o.x+o.width+20<e.offsetWidth&&(o.x+=n.speed*n.playerMovementMultiplier)}(z),function(e){d.Space&&e-o.lastTimeShot>n.fireInterval&&(new c,t.defenderShooting.play(),o.lastTimeShot=e)}(e),function(){const e=document.querySelector(".defender");e.style.left=o.x+"px",e.style.top=o.y-o.height+"px"}(),document.querySelectorAll(".lazer-shot").forEach((e=>{e.y-=n.speed,e.style.top=e.y+"px",e.y+e.offsetHeight<0&&e.remove(),document.querySelectorAll(".shield").forEach((t=>{a(e,t)&&!1===t.classList.contains("shield-destroyed")&&e.remove()}))})),function(e){const t=document.querySelector(".alien-cluster");n.alienPos+t.offsetWidth>e.offsetWidth-100?n.alienDirection=-n.speed:n.alienPos<100&&(n.alienDirection=n.speed),n.alienPos+=n.alienDirection*n.alienClusterMultiplier,t.style.left=n.alienPos+"px"}(z),document.querySelectorAll(".alien").forEach((e=>{document.querySelectorAll(".lazer-shot").forEach((s=>{a(s,e)&&!1===e.classList.contains("dead-alien")&&(e.style.backgroundImage="url('./images/aliens/death-animation.jpg')",setTimeout((()=>{e.classList.add("dead-alien")}),50),s.remove(),t.alienDeathSound.play(),e.classList.contains("alien-40pts")?l.score+=40:e.classList.contains("alien-20pts")?l.score+=20:e.classList.contains("alien-10pts")?l.score+=10:e.classList.contains("mothership")&&(l.score+=300))}))})),function(){const e=document.querySelectorAll(".alien");Array.from(e).filter((e=>e.classList.contains("dead-alien"))).length===n.maxAlienClusterSize&&e.forEach((e=>{e.classList.remove("dead-alien")}))}(),function(e){const t=document.querySelectorAll(".alien");e-l.lastAlienSpriteInterval>n.alienSpriteChangeInterval&&t.forEach((t=>{t.classList.contains("alien-40pts")&&(t.style.backgroundImage.includes("-40pts-1")?t.style.backgroundImage="url('./images/aliens/enemy-40pts-2.png')":t.style.backgroundImage.includes("-40pts-2")?t.style.backgroundImage="url('./images/aliens/enemy-40pts-1.png')":t.style.backgroundImage="url('./images/aliens/enemy-40pts-2.png')"),t.classList.contains("alien-20pts")&&(t.style.backgroundImage.includes("-20pts-1")?t.style.backgroundImage="url('./images/aliens/enemy-20pts-2.png')":t.style.backgroundImage.includes("-20pts-2")?t.style.backgroundImage="url('./images/aliens/enemy-20pts-1.png')":t.style.backgroundImage="url('./images/aliens/enemy-20pts-2.png')"),t.classList.contains("alien-10pts")&&(t.style.backgroundImage.includes("-10pts-1")?t.style.backgroundImage="url('./images/aliens/enemy-10pts-2.png')":t.style.backgroundImage.includes("-10pts-2")?t.style.backgroundImage="url('./images/aliens/enemy-10pts-1.png')":t.style.backgroundImage="url('./images/aliens/enemy-10pts-2.png')"),l.lastAlienSpriteInterval=e}))}(e),function(e){const t=document.querySelectorAll(".alien"),s=Array.from(t).filter((e=>!1===e.classList.contains("dead-alien"))),i=Math.round(s.length*Math.random());e-l.lastAlienLazerShot>n.alienFireInterval&&(new p(s[i]),l.lastAlienLazerShot=e)}(e),function(e,t,s){const i=document.querySelector(".defender");document.querySelectorAll(".alien-lazer-shot").forEach((r=>{r.y+=n.speed,r.style.top=r.y+"px",function(e,t){e-l.lastAlienLazerShotSpriteInterval>n.alienLazerShotSpriteChangeInterval&&(t.style.backgroundImage.includes("type-1")?t.style.backgroundImage="url('./images/aliens/attack-type-2.png')":t.style.backgroundImage.includes("type-2")?t.style.backgroundImage="url('./images/aliens/attack-type-1.png')":t.style.backgroundImage="url('./images/aliens/attack-type-2.png')",l.lastAlienLazerShotSpriteInterval=e)}(s,r),r.y+r.offsetHeight>e.offsetHeight-r.offsetHeight/2&&r.remove(),function(e,t,s,i){if(a(e,t)){let n=document.querySelectorAll(".one-life");t.remove(),n.length>1?(o.x=100,o.y=s.offsetHeight-50,e.style.left=o.x+"px",e.style.top=o.y+"px",n[n.length-1].remove()):(n[n.length-1].remove(),function(e){l.isActive=!1,e.classList.remove("hidden")}(i))}}(i,r,e,t),function(e){document.querySelectorAll(".shield").forEach((t=>{a(t,e)&&!1===t.classList.contains("shield-destroyed")&&(t.classList.contains("shield-full-hp")?(t.classList.remove("shield-full-hp"),t.classList.add("shield-1hit")):t.classList.contains("shield-1hit")?(t.classList.remove("shield-1hit"),t.classList.add("shield-2hits")):t.classList.contains("shield-2hits")?(t.classList.remove("shield-2hits"),t.classList.add("shield-3hits")):t.classList.contains("shield-3hits")&&t.classList.add("shield-destroyed"),e.remove())}))}(r)}))}(z,C,e),e-l.lastSpawnMothership>n.mothershipSpawnInterval+5e4*Math.random()){const t=new i;b=t.mothershipCurrentSound,l.lastSpawnMothership=e}!function(e){document.querySelectorAll(".mothership").forEach((t=>{t.x-=n.speed,t.style.left=t.x+"px",!1===t.classList.contains("dead-alien")&&e.play(),t.x+t.offsetWidth<=0&&t.remove()}))}(b),function(e){e.textContent=l.score.toString();const t=document.querySelectorAll(".one-life");l.score/1e3>=n.extraLivesCounter&&t.length<=n.maxPlayerLives&&(new u,n.extraLivesCounter++)}(k),l.isActive&&window.requestAnimationFrame(E)}t.backgroundMusic.addEventListener("ended",(function(){this.currentTime=0,this.play()})),q.addEventListener("click",(()=>I())),C.addEventListener("click",(()=>function(e,t){t.classList.add("hidden"),document.querySelector(".alien-cluster").remove(),document.querySelectorAll(".lazer-shot").forEach((e=>e.remove())),document.querySelector(".defender").remove(),document.querySelectorAll(".alien-lazer-shot").forEach((e=>e.remove())),document.querySelectorAll(".one-life").forEach((e=>e.remove())),document.querySelector(".shield-field").remove(),o.x=100,o.y=e.offsetHeight-50,o.width=0,o.height=0,o.lastTimeShot=0,o.lives=3,l.score=0,l.lastAlienSpriteInterval=0,l.lastAlienLazerShotSpriteInterval=0,l.lastAlienLazerShot=0,l.lastSpawnMothership=0,l.isActive=!0,I()}(z,C)))})();